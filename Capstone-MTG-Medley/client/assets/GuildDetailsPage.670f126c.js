import{J as h,A as t,_ as j,o as r,a as l,b as e,d as m,g as B,F as f,f as w,t as p,z as N,h as F,i as d,P as _,l as b,M as L,K as V,L as R,N as z,O as A,v as D,r as v,e as O,u as T,Q as q,H as J,I as E}from"./index.30657527.js";class H{async getGuildMembers(o){const n=await h.get(`/api/guilds/${o}/members`);t.members=n.data}async joinGuild(o){const n=await h.post("/api/members",o);t.members.push(n.data),t.activeGuild.members++}async removeFromGuild(o){await h.delete(`/api/members/${o}`),t.members=t.members.filter(n=>n.id!=o),t.activeGuild.members--}}const y=new H;const G={setup(){const a=O(),o=T();async function n(){try{await q.getGuildById(a.params.guildId)}catch(s){b.error("[getting guild by id]",s),_.error(s)}}async function i(){try{await y.getGuildMembers(a.params.guildId)}catch(s){b.error("[getting guild members]",s),_.error(s)}}return F(()=>{n(),i()}),{message:d(()=>t.messages),activeGuild:d(()=>t.activeGuild),members:d(()=>t.members),guilds:d(()=>t.guilds),cover:d(()=>{var s;return`url(${(s=t.activeGuild)==null?void 0:s.coverImg})`}),cardImg:d(()=>{var s;return`url(${(s=t.activeGuild)==null?void 0:s.cardImg})`}),userAddress:d(()=>t.account.location),isMember:d(()=>!!t.members.find(s=>s.accountId==t.account.id)),async joinGuild(){try{let s={guildId:t.activeGuild.id,accountId:t.account.id};await y.joinGuild(s),_.success(`You've joined the ${t.activeGuild.name} Guild`)}catch(s){b.error("[joining guild]",s)}},async removeFromGuild(){try{if(!await _.confirm(`Are you sure you want to leave the ${t.activeGuild.name} Guild?`))return;const M=t.members.find(g=>g.accountId==t.account.id);await y.removeFromGuild(M.id),o.push({name:"Guild"})}catch(s){b.error("[removing from guild]",s),_.error(s)}},scrollLeft(){let s=document.querySelector(".guild-cards-container");scrollPosition.value>100&&(scrollPosition.value-=500),s.scrollTo({left:scrollPosition.value,behavior:"smooth"})},scrollRight(){let s=document.querySelector(".guild-cards-container");scrollPosition.value<1501&&(scrollPosition.value+=500),s.scrollTo({left:scrollPosition.value,behavior:"smooth"})}}},components:{Member:L,GuildChat:V,ClearNavBar:R,Navbar:z,MainMap:A}},C=()=>{D(a=>({"1da08c02":a.cover,"1f905c1e":a.cardImg}))},I=G.setup;G.setup=I?(a,o)=>(C(),I(a,o)):C;const K=G,u=a=>(J("data-v-732bab4f"),a=a(),E(),a),Q={class:"row gruul p-5"},W={class:"col-md-4"},Y={key:0,class:"btn",type:"button","data-bs-toggle":"offcanvas","data-bs-target":"#chat-off-canvas","aria-controls":"chat-off-canvas"},U=u(()=>e("h4",{class:"my-2 mx-3"},"Guild Members",-1)),X={class:"d-flex"},Z={class:"col-md-4 text-center"},$={class:"col-md-4 text-end"},ee=u(()=>e("i",{class:"mdi mdi-plus fs-3"},null,-1)),se=u(()=>e("span",{class:"fs-5"},"Join Guild",-1)),te=[ee,se],oe=u(()=>e("i",{class:"mdi mdi-minus fs-3"},null,-1)),ie=u(()=>e("span",{class:"fs-5"},"Leave Guild",-1)),ae=[oe,ie],ce={class:"col-md-12 my-3"},ne={class:"row"},re=u(()=>e("div",{class:"col-md-3"},[e("div",{class:"azorius-deck rounded d-flex justify-content-end align-items-end"},[e("div",{class:"azorius-glass-card fs-5 text-center rounded-bottom p-1"},[e("b",null," Starter Deck ")])])],-1)),le={class:"col-9 rounded guild-container-bg"},de={class:"row align-items-center"},ue=u(()=>e("i",{class:"button-style mdi mdi-chevron-left"},null,-1)),me=[ue],_e={class:"col-10"},ve={class:"row guild-cards-container"},be=u(()=>e("i",{class:"button-style mdi mdi-chevron-right"},null,-1)),ge=[be],he={class:"col-md-12"},fe={class:"row justify-content-evenly"},pe={class:"col-md-6"},ye={class:"card p-3 azorius-bg elevation-4"},Ge={class:"col-md-6"};function Me(a,o,n,i,s,M){const g=v("ClearNavBar"),k=v("ChatOffcanvas"),S=v("Member"),x=v("GuildCard"),P=v("MainMap");return r(),l(f,null,[e("header",null,[m(g)]),e("main",Q,[e("section",W,[i.isMember==!0?(r(),l("button",Y," Chat With Guild Members ")):B("",!0),m(k),U,e("div",X,[(r(!0),l(f,null,w(i.members,c=>(r(),l("div",{key:c.id},[m(S,{member:c},null,8,["member"])]))),128))])]),e("section",Z,[e("h1",null,p(i.activeGuild.name),1)]),e("section",$,[i.isMember==!1?(r(),l("button",{key:0,class:"btn",onClick:o[0]||(o[0]=c=>i.joinGuild())},te)):(r(),l("button",{key:1,class:"btn",onClick:o[1]||(o[1]=c=>i.removeFromGuild())},ae))]),e("section",ce,[e("div",ne,[re,e("section",le,[e("div",de,[e("div",{class:"col-1 text-center",onClick:o[2]||(o[2]=(...c)=>i.scrollLeft&&i.scrollLeft(...c))},me),e("div",_e,[e("div",ve,[(r(!0),l(f,null,w(i.guilds,c=>(r(),l("div",{class:"col-md-3 my-4",key:c.id},[m(x,{guild:c},null,8,["guild"])]))),128))])]),e("div",{class:"col-1 text-center",onClick:o[3]||(o[3]=(...c)=>i.scrollRight&&i.scrollRight(...c))},ge)])])])]),e("div",he,[e("div",fe,[e("section",pe,[e("div",ye,[e("h4",null,p(i.activeGuild.name)+" Background ",1),N(" "+p(i.activeGuild.background),1)])]),e("section",Ge,[m(P)])])])])],64)}const Ce=j(K,[["render",Me],["__scopeId","data-v-732bab4f"]]);export{Ce as default};
