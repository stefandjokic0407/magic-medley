import{_ as A,o as c,a as o,b as e,d as g,t as v,z as V,g as q,F as P,f as E,h as Q,i as m,A as r,j as u,P as h,n as T,B as j,E as L,v as H,r as D,u as z,e as G,G as O,H as U,I as W}from"./index.30657527.js";const C={setup(){const _=z(),i=G(),p="Swamp";async function t(){try{await u.setActiveDeck(i.params.deckId),await O.getDeckCards(i.params.deckId),f()}catch(s){h.error("[setting active deck]",s)}}function f(){let s=[...r.deckCards];for(let a=0;a<s.length;a++){const l=s[a];l.quantity=1;for(let n=a+1;n<s.length;n++){const k=s[n];l.cardId==k.cardId&&(l.quantity++,s.splice(n,1),n--)}}r.duplicates=s}return Q(()=>{t()}),{lands:p,duplicates:m(()=>r.duplicates),activeDeck:m(()=>r.activeDeck),activeRater:m(()=>{var s;return(s=r.activeDeck)==null?void 0:s.rating.find(a=>a.creatorId==r.account.id)}),deckCards:m(()=>r.deckCards),cover:m(()=>{var s;return`url(${(s=r.activeDeck)==null?void 0:s.picture})`}),deckLandCards:m(()=>{var s;return(s=r.deckCards)==null?void 0:s.filter(a=>a.card.name==p)}),FindCardsMissingFromMyCollectionInDeck(){let s=this.duplicates.map(a=>{let l=r.collection.find(n=>n.name==a.card.name);if(l){let n={...l};if(n.missingQty=a.quantity-l.quantity,n.missingQty>0)return n}else{let n={...a};return n.missingQty=a.quantity,n}});r.missingCards=s},async rateDeck(s){try{const a=this.activeDeck.accountId,l=this.activeDeck.id;await u.rateDeck({value:s},l,a)}catch(a){h.error(a)}},async cloneDeck(){try{await u.cloneDeck(this.activeDeck.id)}catch(s){h.error(s)}},async gotToProfile(){_.push({name:"Profile",params:{profileId:r.activeDeck.profile.id}})}}},components:{DeckCard:T,DeckDetailsCard:j,ShoppingCartModal:L}},B=()=>{H(_=>({"040d8bc6":_.cover}))},N=C.setup;C.setup=N?(_,i)=>(B(),N(_,i)):B;const Y=C,y=_=>(U("data-v-b31377f7"),_=_(),W(),_),J={class:"container-fluid pageBg collectionPageViewHeight"},K={class:"row"},X={key:0,class:"row my-3"},Z={class:"col-6 col-md-2 align-items-center"},$=["src"],tt={class:""},et={class:"col-12 col-md-10"},st={class:"col-12 col-md-8"},it={class:"row"},at={key:0},ct=y(()=>e("span",{class:"mdi mdi-star mdi-24px"},null,-1)),ot={key:1},nt=V("Deck Rating: UNRATED"),dt=y(()=>e("span",{class:"mdi mdi-star mdi-24px"},null,-1)),rt=[nt,dt],lt={class:"row"},_t={class:"col-3 m-1 p-0"},mt={key:0},kt={key:1},vt={key:0,class:"mdi mdi-star-outline mdi-36px"},pt={key:1,class:"mdi mdi-star mdi-36px"},gt={key:0,class:"mdi mdi-star mdi-36px"},ut={key:1,class:"mdi mdi-star-outline mdi-36px"},ht={key:0,class:"mdi mdi-star mdi-36px text-warning"},Dt={key:1,class:"mdi mdi-star-outline mdi-36px"},Ct={key:0,class:"mdi mdi-star mdi-36px"},yt={key:1,class:"mdi mdi-star-outline mdi-36px"},ft={key:0,class:"mdi mdi-star mdi-36px"},xt={key:1,class:"mdi mdi-star-outline mdi-36px"},bt=y(()=>e("div",{class:"col-3"},null,-1)),wt={class:"container"},It={class:"row"},Rt={class:""},St={class:"card-grid"};function Mt(_,i,p,t,f,s){var k,x,b,w,I,R,S,M,F;const a=D("ClearNavBar"),l=D("DeckDetailsCard"),n=D("ShoppingCartModal");return c(),o(P,null,[e("section",J,[e("header",K,[g(a)]),t.activeDeck.id?(c(),o("div",X,[e("div",Z,[e("img",{onClick:i[0]||(i[0]=d=>t.gotToProfile()),type:"button",class:"profile-img",src:(k=t.activeDeck.profile)==null?void 0:k.picture,alt:"profile picture"},null,8,$),e("h4",tt,v((x=t.activeDeck.profile)==null?void 0:x.name),1)]),e("div",et,[e("h1",null,v(t.activeDeck.name),1),e("div",st,v(t.activeDeck.description),1),e("div",it,[(b=t.activeDeck)!=null&&b.avgRating?(c(),o("h4",at,[V("Deck Rating: "+v((((w=t.activeDeck)==null?void 0:w.avgRating)/((I=t.activeDeck.rating)==null?void 0:I.length)).toFixed(1))+"/5",1),ct])):(c(),o("h4",ot,rt))]),e("div",lt,[e("div",_t,[t.activeRater?(c(),o("h5",mt,"You rated this deck:")):(c(),o("h5",kt,"Rate this deck:")),e("button",{onClick:i[1]||(i[1]=d=>t.rateDeck(1)),class:"btn m-0 p-0 text-warning"},[t.activeRater?(c(),o("i",pt)):(c(),o("i",vt))]),e("button",{onClick:i[2]||(i[2]=d=>t.rateDeck(2)),class:"btn m-0 p-0 text-warning"},[((R=t.activeRater)==null?void 0:R.value)>=2?(c(),o("i",gt)):(c(),o("i",ut))]),e("button",{onClick:i[3]||(i[3]=d=>t.rateDeck(3)),class:"btn m-0 p-0 text-warning"},[((S=t.activeRater)==null?void 0:S.value)>=3?(c(),o("i",ht)):(c(),o("i",Dt))]),e("button",{onClick:i[4]||(i[4]=d=>t.rateDeck(4)),class:"btn m-0 p-0 text-warning"},[((M=t.activeRater)==null?void 0:M.value)>=4?(c(),o("i",Ct)):(c(),o("i",yt))]),e("button",{onClick:i[5]||(i[5]=d=>t.rateDeck(5)),class:"btn m-0 p-0 text-warning"},[((F=t.activeRater)==null?void 0:F.value)>=5?(c(),o("i",ft)):(c(),o("i",xt))])]),bt,e("button",{class:"glass btn col-2 m-1",onClick:i[6]||(i[6]=(...d)=>t.cloneDeck&&t.cloneDeck(...d))},"Copy Deck to My Collection"),e("button",{class:"glass btn btn-outline col-2 m-1",type:"button",onClick:i[7]||(i[7]=(...d)=>t.FindCardsMissingFromMyCollectionInDeck&&t.FindCardsMissingFromMyCollectionInDeck(...d)),"data-bs-toggle":"offcanvas","data-bs-target":"#shopping-cart-modal","aria-controls":"offcanvasExample"},"Compare to my collection")])])])):q("",!0),e("div",wt,[e("div",It,[e("div",Rt,[e("div",St,[(c(!0),o(P,null,E(t.deckCards,d=>(c(),o("div",{class:"grid-item",key:d.id},[g(l,{card:d},null,8,["card"])]))),128))])])])])]),g(n)],64)}const Pt=A(Y,[["render",Mt],["__scopeId","data-v-b31377f7"]]);export{Pt as default};
