import{J as b,A as t,_ as j,o as l,a as r,b as e,d as m,g as B,F as f,f as C,t as p,z as N,h as F,i as d,P as _,l as g,M as L,K as V,L as R,N as z,O as A,v as D,r as v,e as O,u as T,Q as q,H as J,I as E}from"./index.10909437.js";class H{async getGuildMembers(o){const n=await b.get(`/api/guilds/${o}/members`);t.members=n.data,console.log(n.data)}async joinGuild(o){console.log(o);const n=await b.post("/api/members",o);t.members.push(n.data),t.activeGuild.members++}async removeFromGuild(o){await b.delete(`/api/members/${o}`),t.members=t.members.filter(n=>n.id!=o),t.activeGuild.members--}}const G=new H;const y={setup(){const a=O(),o=T();async function n(){try{await q.getGuildById(a.params.guildId),console.log(t.activeGuild)}catch(s){g.error("[getting guild by id]",s),_.error(s)}}async function i(){try{await G.getGuildMembers(a.params.guildId)}catch(s){g.error("[getting guild members]",s),_.error(s)}}return F(()=>{n(),i()}),{message:d(()=>t.messages),activeGuild:d(()=>t.activeGuild),members:d(()=>t.members),guilds:d(()=>t.guilds),cover:d(()=>{var s;return`url(${(s=t.activeGuild)==null?void 0:s.coverImg})`}),cardImg:d(()=>{var s;return`url(${(s=t.activeGuild)==null?void 0:s.cardImg})`}),userAddress:d(()=>t.account.location),isMember:d(()=>!!t.members.find(s=>s.accountId==t.account.id)),async joinGuild(){try{let s={guildId:t.activeGuild.id,accountId:t.account.id};await G.joinGuild(s),_.success(`You've joined the ${t.activeGuild.name} Guild`),console.log(t.members)}catch(s){g.error("[joining guild]",s)}},async removeFromGuild(){try{if(!await _.confirm(`Are you sure you want to leave the ${t.activeGuild.name} Guild?`))return;const M=t.members.find(h=>h.accountId==t.account.id);await G.removeFromGuild(M.id),o.push({name:"Guild"})}catch(s){g.error("[removing from guild]",s),_.error(s)}},scrollLeft(){let s=document.querySelector(".guild-cards-container");scrollPosition.value>100&&(scrollPosition.value-=500),s.scrollTo({left:scrollPosition.value,behavior:"smooth"})},scrollRight(){let s=document.querySelector(".guild-cards-container");scrollPosition.value<1501&&(scrollPosition.value+=500),s.scrollTo({left:scrollPosition.value,behavior:"smooth"})}}},components:{Member:L,GuildChat:V,ClearNavBar:R,Navbar:z,MainMap:A}},w=()=>{D(a=>({fff7f1b6:a.cover,"77019a81":a.cardImg}))},I=y.setup;y.setup=I?(a,o)=>(w(),I(a,o)):w;const K=y,u=a=>(J("data-v-743aedd6"),a=a(),E(),a),Q={class:"row gruul p-5"},W={class:"col-md-4"},Y={key:0,class:"btn",type:"button","data-bs-toggle":"offcanvas","data-bs-target":"#chat-off-canvas","aria-controls":"chat-off-canvas"},U=u(()=>e("h4",{class:"my-2 mx-3"},"Guild Members",-1)),X={class:"d-flex"},Z={class:"col-md-4 text-center"},$={class:"col-md-4 text-end"},ee=u(()=>e("i",{class:"mdi mdi-plus fs-3"},null,-1)),se=u(()=>e("span",{class:"fs-5"},"Join Guild",-1)),te=[ee,se],oe=u(()=>e("i",{class:"mdi mdi-minus fs-3"},null,-1)),ie=u(()=>e("span",{class:"fs-5"},"Leave Guild",-1)),ae=[oe,ie],ce={class:"col-md-12 my-3"},ne={class:"row"},le=u(()=>e("div",{class:"col-md-3"},[e("div",{class:"azorius-deck rounded d-flex justify-content-end align-items-end"},[e("div",{class:"azorius-glass-card fs-5 text-center rounded-bottom p-1"},[e("b",null," Starter Deck ")])])],-1)),re={class:"col-9 rounded guild-container-bg"},de={class:"row align-items-center"},ue=u(()=>e("i",{class:"button-style mdi mdi-chevron-left"},null,-1)),me=[ue],_e={class:"col-10"},ve={class:"row guild-cards-container"},ge=u(()=>e("i",{class:"button-style mdi mdi-chevron-right"},null,-1)),he=[ge],be={class:"col-md-12"},fe={class:"row justify-content-evenly"},pe={class:"col-md-6"},Ge={class:"card p-3 azorius-bg elevation-4"},ye={class:"col-md-6"};function Me(a,o,n,i,s,M){const h=v("ClearNavBar"),k=v("ChatOffcanvas"),S=v("Member"),x=v("GuildCard"),P=v("MainMap");return l(),r(f,null,[e("header",null,[m(h)]),e("main",Q,[e("section",W,[i.isMember==!0?(l(),r("button",Y," Chat With Guild Members ")):B("",!0),m(k),U,e("div",X,[(l(!0),r(f,null,C(i.members,c=>(l(),r("div",{key:c.id},[m(S,{member:c},null,8,["member"])]))),128))])]),e("section",Z,[e("h1",null,p(i.activeGuild.name),1)]),e("section",$,[i.isMember==!1?(l(),r("button",{key:0,class:"btn",onClick:o[0]||(o[0]=c=>i.joinGuild())},te)):(l(),r("button",{key:1,class:"btn",onClick:o[1]||(o[1]=c=>i.removeFromGuild())},ae))]),e("section",ce,[e("div",ne,[le,e("section",re,[e("div",de,[e("div",{class:"col-1 text-center",onClick:o[2]||(o[2]=(...c)=>i.scrollLeft&&i.scrollLeft(...c))},me),e("div",_e,[e("div",ve,[(l(!0),r(f,null,C(i.guilds,c=>(l(),r("div",{class:"col-md-3 my-4",key:c.id},[m(x,{guild:c},null,8,["guild"])]))),128))])]),e("div",{class:"col-1 text-center",onClick:o[3]||(o[3]=(...c)=>i.scrollRight&&i.scrollRight(...c))},he)])])])]),e("div",be,[e("div",fe,[e("section",pe,[e("div",Ge,[e("h4",null,p(i.activeGuild.name)+" Background ",1),N(" "+p(i.activeGuild.background),1)])]),e("section",ye,[m(P)])])])])],64)}const we=j(K,[["render",Me],["__scopeId","data-v-743aedd6"]]);export{we as default};
